<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Larp loader</title>
  <style>
    body {
      background-color: black;
      color: #fff;
      font-family: "Courier New", Courier, monospace;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      cursor: default;
      position: relative;
    }

    #terminal {
      max-width: 800px;
      width: 100%;
      padding: 2rem;
      z-index: 1;
    }

    .boot-line {
      white-space: pre;
      line-height: 1.5;
    }

    .ok { color: #00ff00; font-weight: bold; }
    .warn { color: #ff0000; font-weight: bold; }
    .temp { color: orange; font-weight: bold; }

    .center {
      text-align: center;
      margin-top: 100px;
      z-index: 1;
    }

    #boot-status {
      display: none;
      font-weight: bold;
      color: white;
      font-size: 1.5rem;
      margin-top: 150px;
    }

    #boot-end {
      display: none;
      font-weight: bold;
      color: white;
      font-size: 1.5rem;
      margin-top: 150px;
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      50% { opacity: 0; }
    }

    #boot-warning {
      display: none;
      color: #00ff00;
      font-size: 1rem;
      margin-top: 5px;
    }

    #continue {
      display: none;
      color: #ccc;
      font-size: 1rem;
      margin-top: 10px;
      text-decoration: underline;
      cursor: pointer;
    }

    /* CRT line effect */
    .crt-lines::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.03),
        rgba(255,255,255,0.03) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      z-index: 0;
      animation: warp 2s infinite linear;
    }

    /* Warp animation for CRT lines */
    @keyframes warp {
      0% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-5px) skewY(2deg);
      }
      100% {
        transform: translateY(5px) skewY(-2deg);
      }
    }

    /* Apply a slight disorientation on the lines */
    .boot-line {
      animation: disorient 1.5s infinite;
    }

    @keyframes disorient {
      0% { transform: rotate(0deg); }
      25% { transform: rotate(1deg); }
      50% { transform: rotate(-1deg); }
      75% { transform: rotate(0.5deg); }
      100% { transform: rotate(0deg); }
    }
  </style>
</head>
<body class="crt-lines">
  <div id="terminal"></div>

  <div class="center">
    <div id="boot-status"></div>
    <div id="boot-end"></div>
    <div id="boot-warning"></div>
    <div id="continue" onclick="continueClicked()">click to continue</div>
  </div>

  <script>
    const terminal = document.getElementById("terminal");
    const bootStatus = document.getElementById("boot-status");
    const bootEnd = document.getElementById("boot-end");
    const bootWarning = document.getElementById("boot-warning");
    const continueBtn = document.getElementById("continue");

    const bootLines = [
      "[--] Loading kernel modules...",
      "[OK] CPU: AMD Ryzen 9 7950X detected at 5.7 GHz",
      "[OK] Memory: 64GB DDR5-6000 CL30 initialized",
      "[--] Running memory diagnostic...",
      "[OK] PCI bridge detected and initialized",
      "[OK] SATA AHCI controller initialized",
      "[OK] Ethernet controller: Realtek RTL8125B initialized",
      "[!!] ACPI: Temperature threshold warning (CPU: 75°C)",
      "[!!] USB controller failed to respond (Code 43)",
      "[--] Starting system services [1/3]...",
      "[OK] Service manager initialized",
      "[OK] Graphical interface ready",
      "[OK] Cron jobs initialized",
      "[OK] Monitoring daemons running",
      "[OK] User session initialized"
    ];

    function typeText(el, text, cb, delay = 15) {
      let i = 0;
      el.textContent = "";
      function typeChar() {
        if (i < text.length) {
          el.textContent += text[i++];
          setTimeout(typeChar, delay);
        } else {
          cb && cb();
        }
      }
      typeChar();
    }

    function typeLine(line, cb) {
      let j = 0;
      const span = document.createElement("div");
      span.className = "boot-line";
      terminal.appendChild(span);

      function colorizeText(text) {
        return text
          .replace(/\[OK\]/g, '<span class="ok">[OK]</span>')
          .replace(/\[!!\]/g, '<span class="warn">[!!]</span>')
          .replace(/75°C/g, '<span class="temp">75°C</span>');
      }

      function typer() {
        if (j < line.length) {
          span.textContent += line[j++];
          setTimeout(typer, 15);
        } else {
          span.innerHTML = colorizeText(span.textContent);
          cb();
        }
      }

      typer();
    }

    function processLines(i = 0) {
      if (i === 0) {
        bootStatus.style.display = "block";
        typeText(bootStatus, "SYSTEM BOOTING...", () => {
          setTimeout(() => processLines(i + 1), 300);
        });
        return;
      }

      if (i - 1 >= bootLines.length) {
        bootEnd.style.display = "block";
        typeText(bootEnd, "SYSTEM BOOTED", () => {
          setTimeout(() => {
            bootWarning.textContent = "ignoring warnings";
            bootWarning.style.display = "block";
            continueBtn.style.display = "block";
            document.body.style.cursor = "pointer";
            document.body.onclick = continueClicked;
          }, 500);
        });
        return;
      }

      const line = bootLines[i - 1];
      typeLine(line, () => processLines(i + 1));
    }

    function continueClicked() {
      window.location.href = "main.html";
    }

    processLines();
  </script>
</body>
</html>
